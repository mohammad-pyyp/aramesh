{% load static %}

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <script defer="" src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.13.3/cdn.min.js"></script>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <title>Reserve</title>

</head>

<body>
    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">
    <h1 x-text="message"></h1>
    <div class="form-container" x-data="formData">
        <div class="form-title"> رزرو نوبت </div>

        <!-- Step Indicator -->
        <div class="step-indicator">
            <div class="step-number active" :class="{ active: step === 1, completed: step > 1 }">1</div>
            <div class="step-line" :class="{ completed: step > 1 }"></div>
            <div class="step-number" :class="{ active: step === 2, completed: step > 2 }">2</div>
            <div class="step-line" :class="{ completed: step > 2 }"></div>
            <div class="step-number" :class="{ active: step === 3, completed: step > 3 }">3</div>
        </div>

        <!-- Step 1: First Name -->
        <div x-show="step === 1" class="fade-in">
            <div class="input-wrapper">
                <input id="input1" type="text" x-model="firstName" @focus="onFocus('firstName')"
                    @blur="onBlur('firstName')" @input="clearError" placeholder=" " autocomplete="off">
                <label for="input1" x-text="placeholder" class="typing-animation">نام</label>
            </div>
            <div class="button-container">
                <button @click="nextStep">
                    <svg width="32" height="32" fill="currentColor" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5a.5.5 0 0 0 .5-.5">
                        </path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Step 2: Last Name -->
        <div x-show="step === 2" class="fade-in" style="display: none;">
            <div class="input-wrapper">
                <input id="input2" type="text" x-model="lastName" @focus="onFocus('lastName')"
                    @blur="onBlur('lastName')" @input="clearError" placeholder=" " autocomplete="off">
                <label for="input2" x-text="placeholder" class="typing-animation">نام</label>
            </div>
            <div class="button-container">
                <button @click="prevStep" class="back-btn">
                    <svg width="32" height="32" fill="currentColor" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8">
                        </path>
                    </svg>
                </button>
                <button @click="nextStep">
                    <svg width="32" height="32" fill="currentColor" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5a.5.5 0 0 0 .5-.5">
                        </path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Step 3: Phone Number -->
        <div x-show="step === 3" class="fade-in" style="display: none;">
            <div class="input-wrapper">
                <input id="input3" @input="filterDigits()" type="tel" x-model="phoneNumber" @keyup.enter="submitForm"
                    @focus="onFocus('phoneNumber')" @blur="onBlur('phoneNumber')" placeholder=" " autocomplete="off">
                <label for="input3" x-text="placeholder" class="typing-animation">نام</label>
            </div>
            <div class="button-container">
                <button @click="prevStep" class="back-btn">
                    <svg width="32" height="32" fill="currentColor" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8">
                        </path>
                    </svg>
                </button>
                <button @click="submitForm">
                    <svg width="32" height="32" fill="currentColor" viewBox="0 0 16 16">
                        <path
                            d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5">
                        </path>
                        <path
                            d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z">
                        </path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Step 4: Success -->
        <div x-show="step === 4" class="success-message fade-in" style="display: none;">
            <div class="success-icon">
                <svg width="40" height="40" fill="white" viewBox="0 0 16 16">
                    <path
                        d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z">
                    </path>
                </svg>
            </div>
            <h2 style="color: var(--success-color); margin-bottom: 15px;">ثبت شد!</h2>
            <p style="color: #666; font-size: 16px; line-height: 1.6;">
                فرم شما با موفقیت ارسال شد.<br>
                اطلاعات شما ثبت گردید.
            </p>
            <p style="color: #666; font-size: 16px; line-height: 1.6;">
                به زوری با شما تماس خواهیم گرفت . . .
            </p>
            <div
                style="margin-block: 25px; padding: 20px; background: #f8f9fa; border-radius: 10px; text-align: right;">
                <h3 style="color: #333; margin-bottom: 15px;">اطلاعات ثبت شده:</h3>
                <p><strong>نام:</strong> <span x-text="firstName"></span></p>
                <p><strong>نام خانوادگی:</strong> <span x-text="lastName"></span></p>
                <p><strong>شماره تلفن:</strong> <span x-text="phoneNumber"></span></p>
                <p><strong>ابجد اسم:</strong> <span x-text="abjad"></span></p>

            </div>
            <button><a href="{% url 'main:co_so' %}">فروشگاه</a></button>
        </div>
    </div>



    <script src="{% static 'js/script.js' %}"></script>

</body>